{
  "ask_phone": {
    "description": "Возражение: откуда номер",
    "system_response": {
      "template": "Ранее Вы были клиентом Ингосстрах или рассчитывали страховку на нашем сайте",
      "redis_key": "audio_ask_phone"
    }
  },
  "ask_company": {
    "description": "Возражение: какая компания",
    "system_response": {
      "template": "Это страховая компания Ингосстрах",
      "redis_key": "audio_ask_company"
    }
  },
  "purpose": {
    "description": "Возражение: цель звонка",
    "system_response": {
      "template": "Я звон с предложением страхового полиса от военных рисков",
      "redis_key": "audio_purpose"
    }
  },
  "has_insurance": {
    "description": "Возражение: уже оформил",
    "system_response": {
      "template": "Подскажите, у Вас есть страховка именно от военных рисков?",
      "redis_key": "audio_has_insurance"
    },
    "transitions": {
      "existing_insurance": {
        "next_state": "confirm_yes",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "mini_offer",
        "execute_code": ""
      }
    }
  },
  "confirm_yes": {
    "description": "Подтверждение наличия страховки от военных рисков",
    "system_response": {
      "template": "Поняла. Хорошо, что Вы заботитесь об этом. Всего доброго. До свидания!",
      "redis_key": "audio_confirm_yes"
    },
    "transitions": {
      "call_end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "mini_offer": {
    "description": "Мини-предложение при отсутствии страховки от военных рисков",
    "system_response": {
      "template": "Как раз обычное страхование имущество не включает военные риски. Поэтому и предлагаю Вам оформить дополнительный полис, тем более цена прямо скажем символическая, готовы?",
      "redis_key": "audio_mini_offer"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "ask_limits",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "ask_details",
        "execute_code": ""
      }
    }
  },
  "ask_price": {
    "description": "Возражение: сколько стоит",
    "system_response": {
      "template": "Стоимость страхового полиса составляет 0,1% от суммы страхования, т. е. при страховании на 3 млн рублей, стоимость полиса составит всего 3000 рублей. При этом полис действует 12 месяцев",
      "redis_key": "audio_ask_price"
    }
  },
  "ask_limits": {
    "description": "Возражение: лимиты",
    "system_response": {
      "template": "На конструктивные элементы действует лимит от 1 до 30 млн, на внутреннюю отделку от 500 тыс руб. до 10 млн.",
      "redis_key": "audio_ask_limits"
    }
  },
  "ask_details": {
    "description": "Возражение: подробнее",
    "system_response": {
      "template": "Программа Бастион – страхование от рисков налёта беспилотников, терактов, военных действий, в т. ч. военные учения, военные операции любого характера, использования любого вида оружия и т д. В рамках программы можно застраховать саму конструкцию недвижимости, а также, внутреннюю отделку",
      "redis_key": "audio_ask_details"
    }
  },
  "gov_help": {
    "description": "Возражение: возместит государство",
    "system_response": {
      "template": "Согласна, что государство приходит на помощь в сложных ситуациях. Однако и выплаты от государства ограничены определённой суммой, а деньги никогда не бывают лишними: любые бытовые приборы и мелочи в совокупности стоят недёшево. И здесь при невысокой стоимости программы, клиент получает более широкую возможность быстро наладить комфортное существование",
      "redis_key": "audio_gov_help"
    }
  },
  "ask_robot": {
    "description": "Возражение: вы робот",
    "system_response": {
      "template": "Вы правильно заметили, я помогаю коллегам заботиться о клиентах",
      "redis_key": "audio_ask_robot"
    }
  },
  "info_products": {
    "description": "Возражение: другие продукты",
    "system_response": {
      "template": "По другим нашим продуктам, к сожалению, не могу проконсультировать. Я передам контакт куратору и он в ближайшее время свяжется, хорошо?",
      "redis_key": "audio_info_products"
    },
    "transitions": {
      "other_product_curator": {
        "next_state": "callback",
        "execute_code": ""
      }
    }
  },
  "callback": {
    "description": "Обработка перезвона",
    "system_response": {
      "template": "Хорошо. Направила информацию куратору. Теперь давайте вернемся к защите от военных рисков",
      "redis_key": "audio_callback"
    },
    "transitions": {
      "callback_end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "no_response": {
    "description": "Возражение: тишина",
    "system_response": {
      "template": "Факс/Тишина",
      "redis_key": "audio_no_response"
    }
  },
  "check_connection": {
    "description": "Проверка связи при тишине",
    "system_response": {
      "template": "Алло, Вас не слышно",
      "redis_key": "audio_check_connection"
    }
  },
  "voicemail": {
    "description": "Возражение: автоответчик",
    "system_response": {
      "template": "Обработка автоответчика",
      "redis_key": "audio_voicemail"
    }
  },
  "negative": {
    "description": "Возражение: негатив",
    "system_response": {
      "template": "Прошу прощения за беспокойство. Всего доброго",
      "redis_key": "audio_negative"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "start_greeting": {
    "description": "Приветствие и проверка, что говорим с нужным человеком",
    "system_response": {
      "template": "Здравствуйте, меня зовут Дарья, Страховая компания Ингосстрах. {{ session.variables.contact_name }}, верно?",
      "redis_key": "audio_start_greeting"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "pitch_offer",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "ask_for_person",
        "execute_code": ""
      }
    }
  },
  "ask_for_person": {
    "description": "Просьба позвать нужного человека, если по номеру ответил другой",
    "system_response": {
      "template": "Скажите, пожалуйста, я могу услышать {{ session.variables.contact_name }}?",
      "redis_key": "audio_ask_for_person"
    },
    "transitions": {
      "confirm_no": {
        "next_state": "ask_for_person_no",
        "execute_code": ""
      },
      "confirm_yes": {
        "next_state": "pitch_offer",
        "execute_code": ""
      },
      "purpose": {
        "next_state": "purpose_no",
        "execute_code": ""
      }
    }
  },
  "ask_for_person_no": {
    "description": "Отказ от поиска нужного человека",
    "system_response": {
      "template": "Извините за беспокойство. Всего доброго!",
      "redis_key": "audio_ask_for_person_no"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "purpose_no": {
    "description": "Отказ от разговора о цели звонка",
    "system_response": {
      "template": "Извините за беспокойство. Всего доброго",
      "redis_key": "audio_purpose_no"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "pitch_offer": {
    "description": "Презентация страхового предложения",
    "system_response": {
      "template": "От лица компании благодарю вас за доверие — мы рады, что вы с нами. Хочу напомнить: ИНГОСТРАХ платит, и Вы находитесь под надежной защитой. Мы видим, что сейчас, к сожалению, некоторые клиенты сталкиваются с ущербом из-за атак беспилотников. Именно поэтому я хочу предложить вам гарантированную компенсацию за повреждённую квартиру и ремонт — если произойдёт непредвиденное. Давайте я помогу вам сделать жизнь чуть спокойнее и защищённее?",
      "redis_key": "audio_pitch_offer"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "ask_property_value",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "refusal_inquiry",
        "execute_code": ""
      }
    }
  },
  "refusal_inquiry": {
    "description": "Запрос причины отказа",
    "system_response": {
      "template": "Поняла Вас. Подскажите почему отказываетесь?",
      "redis_key": "audio_refusal_inquiry"
    },
    "transitions": {
      "call_end": {
        "next_state": "save_reason",
        "execute_code": ""
      }
    }
  },
  "save_reason": {
    "description": "Сохранение причины отказа",
    "system_response": {
      "template": "",
      "redis_key": ""
    },
    "transitions": {
      "call_end": {
        "next_state": "call_end",
        "execute_code": "session.variables.reason = user_input"
      }
    }
  },
  "call_end": {
    "description": "Завершение звонка с благодарностью",
    "system_response": {
      "template": "Хорошо. Благодарю за уделенное время. Всего доброго. До свидания!",
      "redis_key": "audio_call_end"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "ask_property_value": {
    "description": "Запрос стоимости недвижимости",
    "system_response": {
      "template": "Подскажите, на какую сумму оцениваете стоимость Вашей недвижимости?",
      "redis_key": "audio_ask_property_value"
    },
    "transitions": {
      "value_out_range": {
        "next_state": "property_condition",
        "execute_code": ""
      },
      "value_in_range": {
        "next_state": "confirm_property_value",
        "execute_code": "session.variables.sum_1 = user_input"
      }
    }
  },
  "property_condition": {
    "description": "Объяснение лимитов страхования недвижимости",
    "system_response": {
      "template": "Смотрите, мы можем оформить страховой полис от 1 млн рублей до 30 для квартиры и до 15 миллионов для жилого дома. На какую сумму в этих пределах хотели бы застраховать имущество?",
      "redis_key": "audio_property_condition"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "confirm_property_value",
        "execute_code": "session.variables.sum_1 = user_input"
      },
      "confirm_no": {
        "next_state": "property_condition",
        "execute_code": ""
      }
    }
  },
  "confirm_property_value": {
    "description": "Подтверждение суммы страхования недвижимости",
    "system_response": {
      "template": "Правильно услышала, что хотели бы оформить полис на {{ session.variables.sum_1 }} рублей?",
      "redis_key": "audio_confirm_property_value"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "ask_inner_amount",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "property_condition",
        "execute_code": ""
      }
    }
  },
  "ask_inner_amount": {
    "description": "Запрос суммы страхования внутренней отделки",
    "system_response": {
      "template": "На какую сумму хотели бы застраховать внутренню отделку?",
      "redis_key": "audio_ask_inner_amount"
    },
    "transitions": {
      "not_interest": {
        "next_state": "inner_cover_again",
        "execute_code": ""
      },
      "value_in_range": {
        "next_state": "confirm_inner_amount",
        "execute_code": "session.variables.sum_2 = user_input"
      },
      "value_out_range": {
        "next_state": "inner_condition",
        "execute_code": ""
      }
    }
  },
  "inner_cover_again": {
    "description": "Повторное предложение страхования внутренней отделки",
    "system_response": {
      "template": "Как Вы наверняка знаете сейчас ремонт может быть очень дорогостоящим, может быть включим в полис страхование внутренней отдеки на миллион рублей? По стоимости это всего 1000 руб.",
      "redis_key": "audio_inner_cover_again"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "confirm_inner_amount",
        "execute_code": "session.variables.sum_2 = 1000000"
      },
      "confirm_no": {
        "next_state": "confirm_only_property",
        "execute_code": ""
      }
    }
  },
  "confirm_only_property": {
    "description": "Подтверждение страхования только конструктивных элементов",
    "system_response": {
      "template": "Хорошо, тогда фикисрую только конструктивные элементы",
      "redis_key": "audio_confirm_only_property"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "price_sum",
        "execute_code": ""
      }
    }
  },
  "inner_condition": {
    "description": "Объяснение лимитов страхования внутренней отделки",
    "system_response": {
      "template": "Для страхования внутренней отделки предусмотрены лимиты: от 500 тыс рублей до 10 млн для квартир и комнат и от 500 тыс руб до 5 млн для домов и таунхайсов. Какую сумму в этих пределах укажем?",
      "redis_key": "audio_inner_condition"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "confirm_inner_amount",
        "execute_code": "session.variables.sum_2 = user_input"
      },
      "confirm_no": {
        "next_state": "inner_condition",
        "execute_code": ""
      }
    }
  },
  "confirm_inner_amount": {
    "description": "Подтверждение суммы страхования внутренней отделки",
    "system_response": {
      "template": "Правильно услышала, сумма внутренней отделки {{ session.variables.sum_2 }} рублей?",
      "redis_response": "audio_confirm_inner_amount"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "price_sum",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "inner_condition",
        "execute_code": ""
      }
    }
  },
  "price_sum": {
    "description": "Расчет суммы страхования",
    "system_response": {
      "template": "",
      "redis_key": ""
    },
    "transitions": {
      "calculate": {
        "next_state": "finalize_amount",
        "execute_code": "session.variables.coast_1 = session.variables.sum_1 * 0.001; session.variables.coast_2 = session.variables.sum_2 * 0.001; session.variables.final_sum = session.variables.coast_1 + session.variables.coast_2"
      }
    }
  },
  "finalize_amount": {
    "description": "Финальное предложение с расчетом",
    "system_response": {
      "template": "Стоимость страхового полиса составит {{ session.variables.final_sum }} рублей из них {{ session.variables.coast_1 }} рублей - это взнос за страхование конструктивных элементов и {{ session.variables.coast_2 }} - внутренней отделки. Полис будет действовать в течение 12 месцев. Адрес объекта страхования {{ session.variables.address }}. Для подписания документов в ближайшее время я направлю Вам ссылку в смс сообщении. Получится произвести оплату и оформить полис в течение сегодняшнего дня?",
      "redis_key": "audio_finalize_amount"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "payment_today",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "payment_next_time",
        "execute_code": ""
      },
      "expensive": {
        "next_state": "expensive_amount",
        "execute_code": ""
      }
    }
  },
  "ask_address": {
    "description": "Подтверждение адреса недвижимости",
    "system_response": {
      "template": "Хорошо. Давайте теперь сверим адрес. Недвижимость расположена по адресу {{ session.variables.address }}, верно?",
      "redis_key": "audio_ask_address"
    },
    "transitions": {
      "adress_correct": {
        "next_state": "finalize_amount",
        "execute_code": ""
      },
      "adress_incorrect": {
        "next_state": "adress_agent_ask",
        "execute_code": ""
      }
    }
  },
  "adress_agent_ask": {
    "description": "Передача контакта куратору при неверном адресе",
    "system_response": {
      "template": "Поняла Вас. В таком случае я передам Ваш контакт куратору, он дополнительно свяжется с Вами в ближайшее время для уточнения деталей. Будьте на связи, пожалуйста. Я эе с Вами прощаюсь. Всего доброго! До свидания",
      "redis_key": "audio_adress_agent_ask"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "payment_today": {
    "description": "Подтверждение оплаты сегодня",
    "system_response": {
      "template": "Хорошо. Смс-сообщение поступит в ближайшее время. Рада была Вам помочь. Хорошего дня!",
      "redis_key": "audio_payment_today"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "payment_next_time": {
    "description": "Отложенная оплата",
    "system_response": {
      "template": "Поняла. Смс-сообщение со ссылкой я направлю в ближайшее время и поставлю отметку, чтобы ссылка действовала еще 5 дней для оформления. Спасибо за уделенное время. Хорошего дня!",
      "redis_key": "audio_payment_next_time"
    },
    "transitions": {
      "end": {
        "next_state": "END",
        "execute_code": "",
        "end_dialogue": true
      }
    }
  },
  "expensive_amount": {
    "description": "Запрос комфортной суммы при дорогом полисе",
    "system_response": {
      "template": "Поняла Вас. Подскажите, какая сумма страхового полиса за конструктивные элементы была бы для Вас комфортна ?",
      "redis_key": "audio_expensive_amount"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "offer_new_amount",
        "execute_code": "session.variables.new_coast_1 = user_input; session.variables.new_final_sum = session.variables.new_coast_1 / 0.001"
      }
    }
  },
  "offer_new_amount": {
    "description": "Предложение новой суммы",
    "system_response": {
      "template": "Новая сумма страхового полиса составит {{ session.variables.new_final_sum }} рублей. Подходит ли вам данная сумма и готовы ли вы оплатить сегодня?",
      "redis_key": "audio_offer_new_amount"
    },
    "transitions": {
      "confirm_yes": {
        "next_state": "payment_today",
        "execute_code": ""
      },
      "confirm_no": {
        "next_state": "call_end",
        "execute_code": ""
      }
    }
  }
}
